(()=>{"use strict";const e=".",t=Symbol("target"),s=Symbol("unsubscribe");function n(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}const i=Array.isArray;function r(e){return"symbol"==typeof e}const a={after:(e,t)=>i(e)?e.slice(t.length):""===t?e:e.slice(t.length+1),concat:(t,s)=>i(t)?(t=[...t],s&&t.push(s),t):s&&void 0!==s.toString?(""!==t&&(t+=e),r(s)?t+s.toString():t+s):t,initial:t=>{if(i(t))return t.slice(0,-1);if(""===t)return t;const s=t.lastIndexOf(e);return-1===s?"":t.slice(0,s)},last:t=>{if(i(t))return t[t.length-1]||"";if(""===t)return t;const s=t.lastIndexOf(e);return-1===s?t:t.slice(s+1)},walk:(t,s)=>{if(i(t))for(const e of t)s(e);else if(""!==t){let n=0,i=t.indexOf(e);if(-1===i)s(t);else for(;n<t.length;)-1===i&&(i=t.length),s(t.slice(n,i)),n=i+1,i=t.indexOf(e,n)}},get(e,t){return this.walk(t,(t=>{e&&(e=e[t])})),e}};function o(e,t,s){return e.isUnsubscribed||t.ignoreSymbols&&r(s)||t.ignoreUnderscores&&"_"===s.charAt(0)||"ignoreKeys"in t&&t.ignoreKeys.includes(s)}class c{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){const t=this._getDescriptorCache();let s=t.get(e);return void 0===s&&(s={},t.set(e,s)),s}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);const s=this._getProperties(e);let n=s[t];return void 0===n&&(n=Reflect.getOwnPropertyDescriptor(e,t),s[t]=n),n}getProxy(e,t,s,n){if(this.isUnsubscribed)return e;const i=e[n],r=i||e;this._pathCache.set(r,t);let a=this._proxyCache.get(r);return void 0===a&&(a=void 0===i?new Proxy(e,s):e,this._proxyCache.set(r,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,a.get(t,this.getPath(e)))}defineProperty(e,t,s){return!!Reflect.defineProperty(e,t,s)&&(this.isUnsubscribed||(this._getProperties(e)[t]=s),!0)}setProperty(e,t,s,n,i){if(!this._equals(i,s)||!(t in e)){const i=this._getOwnPropertyDescriptor(e,t);return void 0!==i&&"set"in i?Reflect.set(e,t,s,n):Reflect.set(e,t,s)}return!0}deleteProperty(e,t,s){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){const n=this._getDescriptorCache().get(e);n&&(delete n[t],this._pathCache.delete(s))}return!0}return!1}isSameDescriptor(e,t,s){const n=this._getOwnPropertyDescriptor(t,s);return void 0!==e&&void 0!==n&&Object.is(e.value,n.value)&&(e.writable||!1)===(n.writable||!1)&&(e.enumerable||!1)===(n.enumerable||!1)&&(e.configurable||!1)===(n.configurable||!1)&&e.get===n.get&&e.set===n.set}isGetInvariant(e,t){const s=this._getOwnPropertyDescriptor(e,t);return void 0!==s&&!0!==s.configurable&&!0!==s.writable}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}}function l(e){return"[object Object]"===toString.call(e)}function h(){return!0}function u(e,t){return e.length!==t.length||e.some(((e,s)=>t[s]!==e))}const d=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),f=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),g={push:h,pop:h,shift:h,unshift:h,copyWithin:u,reverse:u,sort:u,splice:u,flat:u,fill:u},p=new Set([...d,...f,...Object.keys(g)]);function _(e,t){if(e.size!==t.size)return!0;for(const s of e)if(!t.has(s))return!0;return!1}const y=["keys","values","entries"],w=new Set(["has","toString"]),v={add:_,clear:_,delete:_,forEach:_},b=new Set([...w,...Object.keys(v),...y]);function k(e,t){if(e.size!==t.size)return!0;let s;for(const[n,i]of e)if(s=t.get(n),s!==i||void 0===s&&!t.has(n))return!0;return!1}const C=new Set([...w,"get"]),P={set:k,clear:k,delete:k,forEach:k},m=new Set([...C,...Object.keys(P),...y]);class S{constructor(e,t,s,n){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=n,this._changes=n?[]:null,this.clone=void 0===t?e:this._shallowClone(e)}static isHandledMethod(e){return d.has(e)}_shallowClone(e){let t=e;if(l(e))t={...e};else if(i(e)||ArrayBuffer.isView(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map((e=>this._shallowClone(e))));else if(e instanceof Map){t=new Map;for(const[s,n]of e.entries())t.set(s,this._shallowClone(n))}return this._clonedCache.add(t),t}preferredThisArg(e,t,s,n){return e?(i(n)?this._onIsChanged=g[t]:n instanceof Set?this._onIsChanged=v[t]:n instanceof Map&&(this._onIsChanged=P[t]),n):s}update(e,t,s){const n=a.after(e,this._path);if("length"!==t){let e=this.clone;a.walk(n,(t=>{e&&e[t]&&(this._clonedCache.has(e[t])||(e[t]=this._shallowClone(e[t])),e=e[t])})),this._hasOnValidate&&this._changes.push({path:n,property:t,previous:s}),e&&e[t]&&(e[t]=s)}this._isChanged=!0}undo(e){let t;for(let s=this._changes.length-1;-1!==s;s--)t=this._changes[s],a.get(e,t.path)[t.property]=t.previous}isChanged(e){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,e)}}class x extends S{static isHandledMethod(e){return p.has(e)}}class O extends S{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}}class M extends S{static isHandledMethod(e){return b.has(e)}undo(e){for(const t of this.clone)e.add(t);for(const t of e)this.clone.has(t)||e.delete(t)}}class D extends S{static isHandledMethod(e){return m.has(e)}undo(e){for(const[t,s]of this.clone.entries())e.set(t,s);for(const t of e.keys())this.clone.has(t)||e.delete(t)}}class H extends S{constructor(e,t,s,n){super(void 0,t,s,n),this._arg1=s[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}}class V extends S{constructor(e,t,s,n){super(void 0,t,s,n),this._weakKey=s[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){const t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}}class I{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return l(e)||i(e)||n(e)}static isHandledMethod(e,t){return l(e)?S.isHandledMethod(t):i(e)?x.isHandledMethod(t):e instanceof Set?M.isHandledMethod(t):e instanceof Map?D.isHandledMethod(t):n(e)}get isCloning(){return this._stack.length>0}start(e,t,s){let n=S;i(e)?n=x:e instanceof Date?n=O:e instanceof Set?n=M:e instanceof Map?n=D:e instanceof WeakSet?n=H:e instanceof WeakMap&&(n=V),this._stack.push(new n(e,t,s,this._hasOnValidate))}update(e,t,s){this._stack[this._stack.length-1].update(e,t,s)}preferredThisArg(e,t,s){const{name:n}=e,i=I.isHandledMethod(s,n);return this._stack[this._stack.length-1].preferredThisArg(i,n,t,s)}isChanged(e,t,s){return this._stack[this._stack.length-1].isChanged(e,t,s)}undo(e){void 0!==this._previousClone&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}}const R={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},A=(e,i,l={})=>{l={...R,...l};const h=Symbol("ProxyTarget"),{equals:u,isShallow:d,ignoreDetached:f,details:g}=l,p=new c(u),_="function"==typeof l.onValidate,y=new I(_),w=(e,t,s,n,i)=>!_||y.isCloning||!0===l.onValidate(a.concat(p.getPath(e),t),s,n,i),v=(t,s,n,i)=>{o(p,l,s)||f&&p.isDetached(t,e)||b(p.getPath(t),s,n,i)},b=(e,t,s,n,r)=>{y.isCloning?y.update(e,t,n):i(a.concat(e,t),s,n,r)},k=e=>e&&e[h]||e,C=(t,s,n,i)=>function(e){return("object"==typeof e?null===e:"function"!=typeof e)||e instanceof RegExp}(t)||"constructor"===n||d&&!I.isHandledMethod(s,n)||o(p,l,n)||p.isGetInvariant(s,n)||f&&p.isDetached(s,e)?t:(void 0===i&&(i=p.getPath(s)),p.getProxy(t,a.concat(i,n),P,h)),P={get(e,i,a){if(r(i)){if(i===h||i===t)return e;if(i===s&&!p.isUnsubscribed&&0===p.getPath(e).length)return p.unsubscribe(),e}const o=n(e)?Reflect.get(e,i):Reflect.get(e,i,a);return C(o,e,i)},set(e,t,s,n){s=k(s);const i=e[h]||e,r=i[t];if(u(r,s)&&t in e)return!0;const a=w(e,t,s,r);return a&&p.setProperty(i,t,s,n,r)?(v(e,t,e[t],r),!0):!a},defineProperty(e,t,s){if(!p.isSameDescriptor(s,e,t)){const n=e[t];w(e,t,s.value,n)&&p.defineProperty(e,t,s,n)&&v(e,t,s.value,n)}return!0},deleteProperty(e,t){if(!Reflect.has(e,t))return!0;const s=Reflect.get(e,t),n=w(e,t,void 0,s);return n&&p.deleteProperty(e,t,s)?(v(e,t,void 0,s),!0):!n},apply(s,n,i){const r=n[h]||n;if(p.isUnsubscribed)return Reflect.apply(s,r,i);if((!1===g||!0!==g&&!g.includes(s.name))&&I.isHandledType(r)){let c=a.initial(p.getPath(s));const l=I.isHandledMethod(r,s.name);y.start(r,c,i);let h=Reflect.apply(s,y.preferredThisArg(s,n,r),l?i.map((e=>k(e))):i);const d=y.isChanged(r,u),f=y.stop();if(I.isHandledType(h)&&l&&(n instanceof Map&&"get"===s.name&&(c=a.concat(c,i[0])),h=p.getProxy(h,c,P)),d){const t={name:s.name,args:i,result:h},n=y.isCloning?a.initial(c):c,o=y.isCloning?a.last(c):"";w(a.get(e,n),o,r,f,t)?b(n,o,r,f,t):y.undo(r)}return(n instanceof Map||n instanceof Set)&&"object"==typeof(o=h)&&"function"==typeof o.next?function(e,s,n,i,r){const a=e.next;if("entries"===s.name)e.next=function(){const e=a.call(this);return!1===e.done&&(e.value[0]=r(e.value[0],s,e.value[0],i),e.value[1]=r(e.value[1],s,e.value[0],i)),e};else if("values"===s.name){const o=n[t].keys();e.next=function(){const e=a.call(this);return!1===e.done&&(e.value=r(e.value,s,o.next().value,i)),e}}else e.next=function(){const e=a.call(this);return!1===e.done&&(e.value=r(e.value,s,e.value,i)),e};return e}(h,s,n,c,C):h}var o;return Reflect.apply(s,n,i)}},m=p.getProxy(e,l.pathAsArray?[]:"",P);return i=i.bind(m),_&&(l.onValidate=l.onValidate.bind(m)),m};A.target=e=>e&&e[t]||e,A.unsubscribe=e=>e[s]||e;const U=A;console.log("Herny"),function(){const e=document.getElementById("result"),t=U({value:0},((t,s)=>{console.log(t),e.textContent=s}));document.getElementById("increment").addEventListener("click",(()=>{t.value+=1})),document.getElementById("decrement").addEventListener("click",(()=>{t.value-=1}))}()})();